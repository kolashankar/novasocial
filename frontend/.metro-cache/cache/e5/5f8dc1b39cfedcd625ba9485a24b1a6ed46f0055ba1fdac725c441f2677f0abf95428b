{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../../native/config/PlatformHelper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"VAeUL6D5iY8QXYEBY5o7Ew2wCF4=","exportNames":["*"],"imports":1}},{"name":"../../utils/AverageWindow","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":58,"index":127}}],"key":"SQ3dfDx/WV1Y1RzFg/JLZPMOTE0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"RenderTimeTracker\", {\n    enumerable: true,\n    get: function () {\n      return RenderTimeTracker;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _nativeConfigPlatformHelper = require(_dependencyMap[2], \"../../native/config/PlatformHelper\");\n  var _utilsAverageWindow = require(_dependencyMap[3], \"../../utils/AverageWindow\");\n  var RenderTimeTracker = /*#__PURE__*/function () {\n    function RenderTimeTracker() {\n      (0, _classCallCheck.default)(this, RenderTimeTracker);\n      this.renderTimeAvgWindow = new _utilsAverageWindow.AverageWindow(5);\n      this.lastTimerStartedAt = -1;\n      this.maxRenderTime = 32; // TODO: Improve this even more\n      this.defaultRenderTime = 16;\n      this.rendersWithoutCommit = 0;\n      this.maxRendersWithoutCommit = 40;\n    }\n    return (0, _createClass.default)(RenderTimeTracker, [{\n      key: \"startTracking\",\n      value: function startTracking() {\n        this.rendersWithoutCommit++;\n        if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n          return;\n        }\n        if (this.lastTimerStartedAt === -1) {\n          this.lastTimerStartedAt = Date.now();\n        }\n      }\n    }, {\n      key: \"markRenderComplete\",\n      value: function markRenderComplete() {\n        this.rendersWithoutCommit = 0;\n        if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n          return;\n        }\n        if (this.lastTimerStartedAt !== -1) {\n          this.renderTimeAvgWindow.addValue(Date.now() - this.lastTimerStartedAt);\n          this.lastTimerStartedAt = -1;\n        }\n      }\n    }, {\n      key: \"hasExceededMaxRendersWithoutCommit\",\n      value: function hasExceededMaxRendersWithoutCommit() {\n        return this.rendersWithoutCommit >= this.maxRendersWithoutCommit;\n      }\n    }, {\n      key: \"getRawValue\",\n      value: function getRawValue() {\n        return this.renderTimeAvgWindow.currentValue;\n      }\n    }, {\n      key: \"getAverageRenderTime\",\n      value: function getAverageRenderTime() {\n        if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n          return this.defaultRenderTime;\n        }\n        return Math.min(this.maxRenderTime, Math.max(Math.round(this.renderTimeAvgWindow.currentValue), 16));\n      }\n    }]);\n  }();\n});","lineCount":77,"map":[[12,2,3,0,"Object"],[12,8,3,0],[12,9,3,0,"defineProperty"],[12,23,3,0],[12,24,3,0,"exports"],[12,31,3,0],[13,4,3,0,"enumerable"],[13,14,3,0],[14,4,3,0,"get"],[14,7,3,0],[14,18,3,0,"get"],[14,19,3,0],[15,6,3,0],[15,13,3,0,"RenderTimeTracker"],[15,30,3,0],[16,4,3,0],[17,2,3,0],[18,2,43,1],[18,6,43,1,"_babelRuntimeHelpersClassCallCheck"],[18,40,43,1],[18,43,43,1,"require"],[18,50,43,1],[18,51,43,1,"_dependencyMap"],[18,65,43,1],[19,2,43,1],[19,6,43,1,"_classCallCheck"],[19,21,43,1],[19,24,43,1,"_interopDefault"],[19,39,43,1],[19,40,43,1,"_babelRuntimeHelpersClassCallCheck"],[19,74,43,1],[20,2,43,1],[20,6,43,1,"_babelRuntimeHelpersCreateClass"],[20,37,43,1],[20,40,43,1,"require"],[20,47,43,1],[20,48,43,1,"_dependencyMap"],[20,62,43,1],[21,2,43,1],[21,6,43,1,"_createClass"],[21,18,43,1],[21,21,43,1,"_interopDefault"],[21,36,43,1],[21,37,43,1,"_babelRuntimeHelpersCreateClass"],[21,68,43,1],[22,2,1,0],[22,6,1,0,"_nativeConfigPlatformHelper"],[22,33,1,0],[22,36,1,0,"require"],[22,43,1,0],[22,44,1,0,"_dependencyMap"],[22,58,1,0],[23,2,2,0],[23,6,2,0,"_utilsAverageWindow"],[23,25,2,0],[23,28,2,0,"require"],[23,35,2,0],[23,36,2,0,"_dependencyMap"],[23,50,2,0],[24,2,2,58],[24,6,3,13,"RenderTimeTracker"],[24,23,3,30],[25,4,4,4],[25,13,4,4,"RenderTimeTracker"],[25,31,4,4],[25,33,4,18],[26,6,4,18],[26,10,4,18,"_classCallCheck"],[26,25,4,18],[26,26,4,18,"default"],[26,33,4,18],[26,41,4,18,"RenderTimeTracker"],[26,58,4,18],[27,6,5,8],[27,10,5,12],[27,11,5,13,"renderTimeAvgWindow"],[27,30,5,32],[27,33,5,35],[27,37,5,39,"AverageWindow"],[27,56,5,52],[27,57,5,52,"AverageWindow"],[27,70,5,52],[27,71,5,53],[27,72,5,54],[27,73,5,55],[28,6,6,8],[28,10,6,12],[28,11,6,13,"lastTimerStartedAt"],[28,29,6,31],[28,32,6,34],[28,33,6,35],[28,34,6,36],[29,6,7,8],[29,10,7,12],[29,11,7,13,"maxRenderTime"],[29,24,7,26],[29,27,7,29],[29,29,7,31],[29,30,7,32],[29,31,7,33],[30,6,8,8],[30,10,8,12],[30,11,8,13,"defaultRenderTime"],[30,28,8,30],[30,31,8,33],[30,33,8,35],[31,6,9,8],[31,10,9,12],[31,11,9,13,"rendersWithoutCommit"],[31,31,9,33],[31,34,9,36],[31,35,9,37],[32,6,10,8],[32,10,10,12],[32,11,10,13,"maxRendersWithoutCommit"],[32,34,10,36],[32,37,10,39],[32,39,10,41],[33,4,11,4],[34,4,11,5],[34,15,11,5,"_createClass"],[34,27,11,5],[34,28,11,5,"default"],[34,35,11,5],[34,37,11,5,"RenderTimeTracker"],[34,54,11,5],[35,6,11,5,"key"],[35,9,11,5],[36,6,11,5,"value"],[36,11,11,5],[36,13,12,4],[36,22,12,4,"startTracking"],[36,35,12,17,"startTracking"],[36,36,12,17],[36,38,12,20],[37,8,13,8],[37,12,13,12],[37,13,13,13,"rendersWithoutCommit"],[37,33,13,33],[37,35,13,35],[38,8,14,8],[38,12,14,12],[38,13,14,13,"PlatformConfig"],[38,40,14,27],[38,41,14,27,"PlatformConfig"],[38,55,14,27],[38,56,14,28,"trackAverageRenderTimeForOffsetProjection"],[38,97,14,69],[38,99,14,71],[39,10,15,12],[40,8,16,8],[41,8,17,8],[41,12,17,12],[41,16,17,16],[41,17,17,17,"lastTimerStartedAt"],[41,35,17,35],[41,40,17,40],[41,41,17,41],[41,42,17,42],[41,44,17,44],[42,10,18,12],[42,14,18,16],[42,15,18,17,"lastTimerStartedAt"],[42,33,18,35],[42,36,18,38,"Date"],[42,40,18,42],[42,41,18,43,"now"],[42,44,18,46],[42,45,18,47],[42,46,18,48],[43,8,19,8],[44,6,20,4],[45,4,20,5],[46,6,20,5,"key"],[46,9,20,5],[47,6,20,5,"value"],[47,11,20,5],[47,13,21,4],[47,22,21,4,"markRenderComplete"],[47,40,21,22,"markRenderComplete"],[47,41,21,22],[47,43,21,25],[48,8,22,8],[48,12,22,12],[48,13,22,13,"rendersWithoutCommit"],[48,33,22,33],[48,36,22,36],[48,37,22,37],[49,8,23,8],[49,12,23,12],[49,13,23,13,"PlatformConfig"],[49,40,23,27],[49,41,23,27,"PlatformConfig"],[49,55,23,27],[49,56,23,28,"trackAverageRenderTimeForOffsetProjection"],[49,97,23,69],[49,99,23,71],[50,10,24,12],[51,8,25,8],[52,8,26,8],[52,12,26,12],[52,16,26,16],[52,17,26,17,"lastTimerStartedAt"],[52,35,26,35],[52,40,26,40],[52,41,26,41],[52,42,26,42],[52,44,26,44],[53,10,27,12],[53,14,27,16],[53,15,27,17,"renderTimeAvgWindow"],[53,34,27,36],[53,35,27,37,"addValue"],[53,43,27,45],[53,44,27,46,"Date"],[53,48,27,50],[53,49,27,51,"now"],[53,52,27,54],[53,53,27,55],[53,54,27,56],[53,57,27,59],[53,61,27,63],[53,62,27,64,"lastTimerStartedAt"],[53,80,27,82],[53,81,27,83],[54,10,28,12],[54,14,28,16],[54,15,28,17,"lastTimerStartedAt"],[54,33,28,35],[54,36,28,38],[54,37,28,39],[54,38,28,40],[55,8,29,8],[56,6,30,4],[57,4,30,5],[58,6,30,5,"key"],[58,9,30,5],[59,6,30,5,"value"],[59,11,30,5],[59,13,31,4],[59,22,31,4,"hasExceededMaxRendersWithoutCommit"],[59,56,31,38,"hasExceededMaxRendersWithoutCommit"],[59,57,31,38],[59,59,31,41],[60,8,32,8],[60,15,32,15],[60,19,32,19],[60,20,32,20,"rendersWithoutCommit"],[60,40,32,40],[60,44,32,44],[60,48,32,48],[60,49,32,49,"maxRendersWithoutCommit"],[60,72,32,72],[61,6,33,4],[62,4,33,5],[63,6,33,5,"key"],[63,9,33,5],[64,6,33,5,"value"],[64,11,33,5],[64,13,34,4],[64,22,34,4,"getRawValue"],[64,33,34,15,"getRawValue"],[64,34,34,15],[64,36,34,18],[65,8,35,8],[65,15,35,15],[65,19,35,19],[65,20,35,20,"renderTimeAvgWindow"],[65,39,35,39],[65,40,35,40,"currentValue"],[65,52,35,52],[66,6,36,4],[67,4,36,5],[68,6,36,5,"key"],[68,9,36,5],[69,6,36,5,"value"],[69,11,36,5],[69,13,37,4],[69,22,37,4,"getAverageRenderTime"],[69,42,37,24,"getAverageRenderTime"],[69,43,37,24],[69,45,37,27],[70,8,38,8],[70,12,38,12],[70,13,38,13,"PlatformConfig"],[70,40,38,27],[70,41,38,27,"PlatformConfig"],[70,55,38,27],[70,56,38,28,"trackAverageRenderTimeForOffsetProjection"],[70,97,38,69],[70,99,38,71],[71,10,39,12],[71,17,39,19],[71,21,39,23],[71,22,39,24,"defaultRenderTime"],[71,39,39,41],[72,8,40,8],[73,8,41,8],[73,15,41,15,"Math"],[73,19,41,19],[73,20,41,20,"min"],[73,23,41,23],[73,24,41,24],[73,28,41,28],[73,29,41,29,"maxRenderTime"],[73,42,41,42],[73,44,41,44,"Math"],[73,48,41,48],[73,49,41,49,"max"],[73,52,41,52],[73,53,41,53,"Math"],[73,57,41,57],[73,58,41,58,"round"],[73,63,41,63],[73,64,41,64],[73,68,41,68],[73,69,41,69,"renderTimeAvgWindow"],[73,88,41,88],[73,89,41,89,"currentValue"],[73,101,41,101],[73,102,41,102],[73,104,41,104],[73,106,41,106],[73,107,41,107],[73,108,41,108],[74,6,42,4],[75,4,42,5],[76,2,42,5],[77,0,42,5],[77,3]],"functionMap":{"names":["<global>","RenderTimeTracker","constructor","startTracking","markRenderComplete","hasExceededMaxRendersWithoutCommit","getRawValue","getAverageRenderTime"],"mappings":"AAA;OCE;ICC;KDO;IEC;KFQ;IGC;KHS;IIC;KJE;IKC;KLE;IMC;KNK;CDC"},"hasCjsExports":false},"type":"js/module"}]}