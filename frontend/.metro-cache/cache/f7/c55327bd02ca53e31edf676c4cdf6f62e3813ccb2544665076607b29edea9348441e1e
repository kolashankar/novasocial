{"dependencies":[{"name":"../NativeCameraModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"TJEHxiajmAnXYtChsufVbhWGOrI=","exportNames":["*"],"imports":1}},{"name":"./FrameProcessorsUnavailableError","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":84,"index":138}}],"key":"gTwmIrM8qVRe40xt7F4ceNy7iow=","exportNames":["*"],"imports":1}},{"name":"react-native-worklets-core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":2,"index":359},"end":{"line":12,"column":39,"index":396}}],"key":"Qf8lQmHIYzsLNbcKKbJevkIpf40=","exportNames":["*"],"imports":1,"isOptional":true}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"VisionCameraProxy\", {\n    enumerable: true,\n    get: function () {\n      return VisionCameraProxy;\n    }\n  });\n  var _NativeCameraModule = require(_dependencyMap[0], \"../NativeCameraModule\");\n  var _FrameProcessorsUnavailableError = require(_dependencyMap[1], \"./FrameProcessorsUnavailableError\");\n  /**\n   * An initialized native instance of a FrameProcessorPlugin.\n   * All memory allocated by this plugin will be deleted once this value goes out of scope.\n   */\n\n  let proxy;\n  try {\n    // 1. Load react-native-worklets-core\n    require(_dependencyMap[2], \"react-native-worklets-core\");\n    // 2. If react-native-worklets-core could be loaded, try to install Frame Processor bindings\n    const result = _NativeCameraModule.CameraModule.installFrameProcessorBindings();\n    if (result !== true) throw new Error(`Failed to install Frame Processor JSI bindings! installFrameProcessorBindings() returned ${result}`);\n\n    // 3. Get global.VisionCameraProxy which was just installed by installFrameProcessorBindings()\n    // @ts-expect-error it's a global JSI variable injected by native\n    const globalProxy = global.VisionCameraProxy;\n    if (globalProxy == null) throw new Error('global.VisionCameraProxy is not installed! Was installFrameProcessorBindings() called?');\n    proxy = globalProxy;\n  } catch (e) {\n    // global.VisionCameraProxy is not injected!\n    // Just use dummy implementations that will throw when the user tries to use Frame Processors.\n    proxy = {\n      initFrameProcessorPlugin: () => {\n        throw new _FrameProcessorsUnavailableError.FrameProcessorsUnavailableError(e);\n      },\n      removeFrameProcessor: () => {\n        throw new _FrameProcessorsUnavailableError.FrameProcessorsUnavailableError(e);\n      },\n      setFrameProcessor: () => {\n        throw new _FrameProcessorsUnavailableError.FrameProcessorsUnavailableError(e);\n      },\n      workletContext: undefined\n    };\n  }\n\n  /**\n   * The JSI Proxy for the Frame Processors Runtime.\n   *\n   * This will be replaced with a CxxTurboModule in the future.\n   */\n  const VisionCameraProxy = proxy;\n});","lineCount":56,"map":[[7,2,44,0,"Object"],[7,8,44,0],[7,9,44,0,"defineProperty"],[7,23,44,0],[7,24,44,0,"exports"],[7,31,44,0],[8,4,44,0,"enumerable"],[8,14,44,0],[9,4,44,0,"get"],[9,7,44,0],[9,18,44,0,"get"],[9,19,44,0],[10,6,44,0],[10,13,44,0,"VisionCameraProxy"],[10,30,44,0],[11,4,44,0],[12,2,44,0],[13,2,1,0],[13,6,1,0,"_NativeCameraModule"],[13,25,1,0],[13,28,1,0,"require"],[13,35,1,0],[13,36,1,0,"_dependencyMap"],[13,50,1,0],[14,2,2,0],[14,6,2,0,"_FrameProcessorsUnavailableError"],[14,38,2,0],[14,41,2,0,"require"],[14,48,2,0],[14,49,2,0,"_dependencyMap"],[14,63,2,0],[15,2,4,0],[16,0,5,0],[17,0,6,0],[18,0,7,0],[20,2,9,0],[20,6,9,4,"proxy"],[20,11,9,9],[21,2,10,0],[21,6,10,4],[22,4,11,2],[23,4,12,2,"require"],[23,11,12,9],[23,12,12,9,"_dependencyMap"],[23,26,12,9],[23,59,12,38],[23,60,12,39],[24,4,13,2],[25,4,14,2],[25,10,14,8,"result"],[25,16,14,14],[25,19,14,17,"CameraModule"],[25,38,14,29],[25,39,14,29,"CameraModule"],[25,51,14,29],[25,52,14,30,"installFrameProcessorBindings"],[25,81,14,59],[25,82,14,60],[25,83,14,61],[26,4,15,2],[26,8,15,6,"result"],[26,14,15,12],[26,19,15,17],[26,23,15,21],[26,25,15,23],[26,31,15,29],[26,35,15,33,"Error"],[26,40,15,38],[26,41,15,39],[26,133,15,131,"result"],[26,139,15,137],[26,141,15,139],[26,142,15,140],[28,4,17,2],[29,4,18,2],[30,4,19,2],[30,10,19,8,"globalProxy"],[30,21,19,19],[30,24,19,22,"global"],[30,30,19,28],[30,31,19,29,"VisionCameraProxy"],[30,48,19,46],[31,4,20,2],[31,8,20,6,"globalProxy"],[31,19,20,17],[31,23,20,21],[31,27,20,25],[31,29,20,27],[31,35,20,33],[31,39,20,37,"Error"],[31,44,20,42],[31,45,20,43],[31,133,20,131],[31,134,20,132],[32,4,21,2,"proxy"],[32,9,21,7],[32,12,21,10,"globalProxy"],[32,23,21,21],[33,2,22,0],[33,3,22,1],[33,4,22,2],[33,11,22,9,"e"],[33,12,22,10],[33,14,22,12],[34,4,23,2],[35,4,24,2],[36,4,25,2,"proxy"],[36,9,25,7],[36,12,25,10],[37,6,26,4,"initFrameProcessorPlugin"],[37,30,26,28],[37,32,26,30,"initFrameProcessorPlugin"],[37,33,26,30],[37,38,26,36],[38,8,27,6],[38,14,27,12],[38,18,27,16,"FrameProcessorsUnavailableError"],[38,50,27,47],[38,51,27,47,"FrameProcessorsUnavailableError"],[38,82,27,47],[38,83,27,48,"e"],[38,84,27,49],[38,85,27,50],[39,6,28,4],[39,7,28,5],[40,6,29,4,"removeFrameProcessor"],[40,26,29,24],[40,28,29,26,"removeFrameProcessor"],[40,29,29,26],[40,34,29,32],[41,8,30,6],[41,14,30,12],[41,18,30,16,"FrameProcessorsUnavailableError"],[41,50,30,47],[41,51,30,47,"FrameProcessorsUnavailableError"],[41,82,30,47],[41,83,30,48,"e"],[41,84,30,49],[41,85,30,50],[42,6,31,4],[42,7,31,5],[43,6,32,4,"setFrameProcessor"],[43,23,32,21],[43,25,32,23,"setFrameProcessor"],[43,26,32,23],[43,31,32,29],[44,8,33,6],[44,14,33,12],[44,18,33,16,"FrameProcessorsUnavailableError"],[44,50,33,47],[44,51,33,47,"FrameProcessorsUnavailableError"],[44,82,33,47],[44,83,33,48,"e"],[44,84,33,49],[44,85,33,50],[45,6,34,4],[45,7,34,5],[46,6,35,4,"workletContext"],[46,20,35,18],[46,22,35,20,"undefined"],[47,4,36,2],[47,5,36,3],[48,2,37,0],[50,2,39,0],[51,0,40,0],[52,0,41,0],[53,0,42,0],[54,0,43,0],[55,2,44,7],[55,8,44,13,"VisionCameraProxy"],[55,25,44,30],[55,28,44,33,"proxy"],[55,33,44,38],[56,0,44,39],[56,3]],"functionMap":{"names":["<global>","proxy.initFrameProcessorPlugin","proxy.removeFrameProcessor","proxy.setFrameProcessor"],"mappings":"AAA;8BCyB;KDE;0BEC;KFE;uBGC;KHE"},"hasCjsExports":false},"type":"js/module"}]}