{"dependencies":[{"name":"../dependencies/WorkletsProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":62,"index":62}}],"key":"5OGlOxUAFMMCpeUYvtYQCOkE3Aw=","exportNames":["*"],"imports":1}},{"name":"./FrameProcessorsUnavailableError","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":63},"end":{"line":2,"column":84,"index":147}}],"key":"gTwmIrM8qVRe40xt7F4ceNy7iow=","exportNames":["*"],"imports":1}},{"name":"./throwErrorOnJS","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":148},"end":{"line":3,"column":50,"index":198}}],"key":"RpaQ/BrKCPOWCzy3Ib+nIZOtDwU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"runAsync\", {\n    enumerable: true,\n    get: function () {\n      return runAsync;\n    }\n  });\n  var _dependenciesWorkletsProxy = require(_dependencyMap[0], \"../dependencies/WorkletsProxy\");\n  var _FrameProcessorsUnavailableError = require(_dependencyMap[1], \"./FrameProcessorsUnavailableError\");\n  var _throwErrorOnJS = require(_dependencyMap[2], \"./throwErrorOnJS\");\n  /**\n   * A synchronized Shared Value to indicate whether the async context is currently executing\n   */\n  let isAsyncContextBusy;\n  /**\n   * Runs the given function on the async context, and sets {@linkcode isAsyncContextBusy} to false after it finished executing.\n   */\n  let runOnAsyncContext;\n  const _worklet_17335875081787_init_data = {\n    code: \"function reactNativeVisionCamera_runAsyncJs1(frame,func){const{throwErrorOnJS,isAsyncContextBusy}=this.__closure;try{func();}catch(e){throwErrorOnJS(e);}finally{const internal=frame;internal.decrementRefCount();isAsyncContextBusy.value=false;}}\",\n    location: \"/app/frontend/node_modules/react-native-vision-camera/lib/module/frame-processors/runAsync.js\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"reactNativeVisionCamera_runAsyncJs1\\\",\\\"frame\\\",\\\"func\\\",\\\"throwErrorOnJS\\\",\\\"isAsyncContextBusy\\\",\\\"__closure\\\",\\\"e\\\",\\\"internal\\\",\\\"decrementRefCount\\\",\\\"value\\\"],\\\"sources\\\":[\\\"/app/frontend/node_modules/react-native-vision-camera/lib/module/frame-processors/runAsync.js\\\"],\\\"mappings\\\":\\\"AAgBkD,QAAC,CAAAA,mCAAgBA,CAAAC,KAAA,CAAAC,IAAA,QAAAC,cAAA,CAAAC,kBAAA,OAAAC,SAAA,CAG/D,GAAI,CAEFH,IAAI,CAAC,CAAC,CACR,CAAE,MAAOI,CAAC,CAAE,CAEVH,cAAc,CAACG,CAAC,CAAC,CACnB,CAAC,OAAS,CAER,KAAM,CAAAC,QAAQ,CAAGN,KAAK,CACtBM,QAAQ,CAACC,iBAAiB,CAAC,CAAC,CAG5BJ,kBAAkB,CAACK,KAAK,CAAG,KAAK,CAClC,CACF\\\",\\\"ignoreList\\\":[]}\",\n    version: \"3.17.5\"\n  };\n  try {\n    const Worklets = _dependenciesWorkletsProxy.WorkletsProxy.Worklets;\n    isAsyncContextBusy = Worklets.createSharedValue(false);\n    const asyncContext = Worklets.createContext('VisionCamera.async');\n    runOnAsyncContext = asyncContext.createRunAsync(function () {\n      const _e = [new global.Error(), -3, -27];\n      const reactNativeVisionCamera_runAsyncJs1 = function (frame, func) {\n        try {\n          // Call long-running function\n          func();\n        } catch (e) {\n          // Re-throw error on JS Thread\n          (0, _throwErrorOnJS.throwErrorOnJS)(e);\n        } finally {\n          // Potentially delete Frame if we were the last ref\n          const internal = frame;\n          internal.decrementRefCount();\n\n          // free up async context again, new calls can be made\n          isAsyncContextBusy.value = false;\n        }\n      };\n      reactNativeVisionCamera_runAsyncJs1.__closure = {\n        throwErrorOnJS: _throwErrorOnJS.throwErrorOnJS,\n        isAsyncContextBusy\n      };\n      reactNativeVisionCamera_runAsyncJs1.__workletHash = 17335875081787;\n      reactNativeVisionCamera_runAsyncJs1.__initData = _worklet_17335875081787_init_data;\n      reactNativeVisionCamera_runAsyncJs1.__stackDetails = _e;\n      return reactNativeVisionCamera_runAsyncJs1;\n    }());\n  } catch (e) {\n    // react-native-worklets-core is not installed!\n    // Just use dummy implementations that will throw when the user tries to use Frame Processors.\n    isAsyncContextBusy = {\n      value: false\n    };\n    runOnAsyncContext = () => {\n      throw new _FrameProcessorsUnavailableError.FrameProcessorsUnavailableError(e);\n    };\n  }\n\n  /**\n   * Runs the given {@linkcode func} asynchronously on a separate thread,\n   * allowing the Frame Processor to continue executing without dropping a Frame.\n   *\n   * Only one {@linkcode runAsync} call will execute at the same time,\n   * so {@linkcode runAsync} is **not parallel**, **but asynchronous**.\n   *\n   *\n   * For example, if your Camera is running at 60 FPS (16ms per frame), and a\n   * heavy ML face detection Frame Processor Plugin takes 500ms to execute,\n   * you have two options:\n   * - Run the plugin normally (synchronously in `useFrameProcessor`)\n   * but drop a lot of Frames, as we can only run at 2 FPS (500ms per frame)\n   * - Call the plugin inside {@linkcode runAsync} to allow the Camera to still\n   * run at 60 FPS, but offload the heavy ML face detection plugin to the\n   * asynchronous context, where it will run at 2 FPS.\n   *\n   * @note {@linkcode runAsync} cannot be used to draw to a Frame in a Skia Frame Processor.\n   * @param frame The current Frame of the Frame Processor.\n   * @param func The function to execute.\n   * @worklet\n   * @example\n   *\n   * ```ts\n   * const frameProcessor = useFrameProcessor((frame) => {\n   *   'worklet'\n   *   console.log('New Frame arrived!')\n   *\n   *   runAsync(frame, () => {\n   *     'worklet'\n   *     const faces = detectFaces(frame)\n   *     const face = faces[0]\n   *     console.log(`Detected a new face: ${face}`)\n   *   })\n   * })\n   * ```\n   */\n  const _worklet_13768994699248_init_data = {\n    code: \"function runAsync_reactNativeVisionCamera_runAsyncJs2(frame,func){const{isAsyncContextBusy,runOnAsyncContext}=this.__closure;if(isAsyncContextBusy.value){return;}const internal=frame;internal.incrementRefCount();isAsyncContextBusy.value=true;runOnAsyncContext(frame,func);}\",\n    location: \"/app/frontend/node_modules/react-native-vision-camera/lib/module/frame-processors/runAsync.js\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"runAsync_reactNativeVisionCamera_runAsyncJs2\\\",\\\"frame\\\",\\\"func\\\",\\\"isAsyncContextBusy\\\",\\\"runOnAsyncContext\\\",\\\"__closure\\\",\\\"value\\\",\\\"internal\\\",\\\"incrementRefCount\\\"],\\\"sources\\\":[\\\"/app/frontend/node_modules/react-native-vision-camera/lib/module/frame-processors/runAsync.js\\\"],\\\"mappings\\\":\\\"AAkFO,SAAAA,4CAA+BA,CAAAC,KAAA,CAAAC,IAAA,QAAAC,kBAAA,CAAAC,iBAAA,OAAAC,SAAA,CAGpC,GAAIF,kBAAkB,CAACG,KAAK,CAAE,CAG5B,OACF,CAGA,KAAM,CAAAC,QAAQ,CAAGN,KAAK,CACtBM,QAAQ,CAACC,iBAAiB,CAAC,CAAC,CAC5BL,kBAAkB,CAACG,KAAK,CAAG,IAAI,CAG/BF,iBAAiB,CAACH,KAAK,CAAEC,IAAI,CAAC,CAChC\\\",\\\"ignoreList\\\":[]}\",\n    version: \"3.17.5\"\n  };\n  const runAsync = function () {\n    const _e = [new global.Error(), -3, -27];\n    const runAsync = function (frame, func) {\n      if (isAsyncContextBusy.value) {\n        // async context is currently busy, we cannot schedule new work in time.\n        // drop this frame/runAsync call.\n        return;\n      }\n\n      // Increment ref count by one\n      const internal = frame;\n      internal.incrementRefCount();\n      isAsyncContextBusy.value = true;\n\n      // Call in separate background context\n      runOnAsyncContext(frame, func);\n    };\n    runAsync.__closure = {\n      isAsyncContextBusy,\n      runOnAsyncContext\n    };\n    runAsync.__workletHash = 13768994699248;\n    runAsync.__initData = _worklet_13768994699248_init_data;\n    runAsync.__stackDetails = _e;\n    return runAsync;\n  }();\n});","lineCount":141,"map":[[7,2,83,0,"Object"],[7,8,83,0],[7,9,83,0,"defineProperty"],[7,23,83,0],[7,24,83,0,"exports"],[7,31,83,0],[8,4,83,0,"enumerable"],[8,14,83,0],[9,4,83,0,"get"],[9,7,83,0],[9,18,83,0,"get"],[9,19,83,0],[10,6,83,0],[10,13,83,0,"runAsync"],[10,21,83,0],[11,4,83,0],[12,2,83,0],[13,2,1,0],[13,6,1,0,"_dependenciesWorkletsProxy"],[13,32,1,0],[13,35,1,0,"require"],[13,42,1,0],[13,43,1,0,"_dependencyMap"],[13,57,1,0],[14,2,2,0],[14,6,2,0,"_FrameProcessorsUnavailableError"],[14,38,2,0],[14,41,2,0,"require"],[14,48,2,0],[14,49,2,0,"_dependencyMap"],[14,63,2,0],[15,2,3,0],[15,6,3,0,"_throwErrorOnJS"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,5,0],[17,0,6,0],[18,0,7,0],[19,2,8,0],[19,6,8,4,"isAsyncContextBusy"],[19,24,8,22],[20,2,9,0],[21,0,10,0],[22,0,11,0],[23,2,12,0],[23,6,12,4,"runOnAsyncContext"],[23,23,12,21],[24,2,12,22],[24,8,12,22,"_worklet_17335875081787_init_data"],[24,41,12,22],[25,4,12,22,"code"],[25,8,12,22],[26,4,12,22,"location"],[26,12,12,22],[27,4,12,22,"sourceMap"],[27,13,12,22],[28,4,12,22,"version"],[28,11,12,22],[29,2,12,22],[30,2,13,0],[30,6,13,4],[31,4,14,2],[31,10,14,8,"Worklets"],[31,18,14,16],[31,21,14,19,"WorkletsProxy"],[31,47,14,32],[31,48,14,32,"WorkletsProxy"],[31,61,14,32],[31,62,14,33,"Worklets"],[31,70,14,41],[32,4,15,2,"isAsyncContextBusy"],[32,22,15,20],[32,25,15,23,"Worklets"],[32,33,15,31],[32,34,15,32,"createSharedValue"],[32,51,15,49],[32,52,15,50],[32,57,15,55],[32,58,15,56],[33,4,16,2],[33,10,16,8,"asyncContext"],[33,22,16,20],[33,25,16,23,"Worklets"],[33,33,16,31],[33,34,16,32,"createContext"],[33,47,16,45],[33,48,16,46],[33,68,16,66],[33,69,16,67],[34,4,17,2,"runOnAsyncContext"],[34,21,17,19],[34,24,17,22,"asyncContext"],[34,36,17,34],[34,37,17,35,"createRunAsync"],[34,51,17,49],[34,52,17,50],[35,6,17,50],[35,12,17,50,"_e"],[35,14,17,50],[35,22,17,50,"global"],[35,28,17,50],[35,29,17,50,"Error"],[35,34,17,50],[36,6,17,50],[36,12,17,50,"reactNativeVisionCamera_runAsyncJs1"],[36,47,17,50],[36,59,17,50,"reactNativeVisionCamera_runAsyncJs1"],[36,60,17,51,"frame"],[36,65,17,56],[36,67,17,58,"func"],[36,71,17,62],[36,73,17,67],[37,8,20,4],[37,12,20,8],[38,10,21,6],[39,10,22,6,"func"],[39,14,22,10],[39,15,22,11],[39,16,22,12],[40,8,23,4],[40,9,23,5],[40,10,23,6],[40,17,23,13,"e"],[40,18,23,14],[40,20,23,16],[41,10,24,6],[42,10,25,6],[42,14,25,6,"throwErrorOnJS"],[42,29,25,20],[42,30,25,20,"throwErrorOnJS"],[42,44,25,20],[42,46,25,21,"e"],[42,47,25,22],[42,48,25,23],[43,8,26,4],[43,9,26,5],[43,18,26,14],[44,10,27,6],[45,10,28,6],[45,16,28,12,"internal"],[45,24,28,20],[45,27,28,23,"frame"],[45,32,28,28],[46,10,29,6,"internal"],[46,18,29,14],[46,19,29,15,"decrementRefCount"],[46,36,29,32],[46,37,29,33],[46,38,29,34],[48,10,31,6],[49,10,32,6,"isAsyncContextBusy"],[49,28,32,24],[49,29,32,25,"value"],[49,34,32,30],[49,37,32,33],[49,42,32,38],[50,8,33,4],[51,6,34,2],[51,7,34,3],[52,6,34,3,"reactNativeVisionCamera_runAsyncJs1"],[52,41,34,3],[52,42,34,3,"__closure"],[52,51,34,3],[53,8,34,3,"throwErrorOnJS"],[53,22,34,3],[53,24,25,6,"throwErrorOnJS"],[53,39,25,20],[53,40,25,20,"throwErrorOnJS"],[53,54,25,20],[54,8,25,20,"isAsyncContextBusy"],[55,6,25,20],[56,6,25,20,"reactNativeVisionCamera_runAsyncJs1"],[56,41,25,20],[56,42,25,20,"__workletHash"],[56,55,25,20],[57,6,25,20,"reactNativeVisionCamera_runAsyncJs1"],[57,41,25,20],[57,42,25,20,"__initData"],[57,52,25,20],[57,55,25,20,"_worklet_17335875081787_init_data"],[57,88,25,20],[58,6,25,20,"reactNativeVisionCamera_runAsyncJs1"],[58,41,25,20],[58,42,25,20,"__stackDetails"],[58,56,25,20],[58,59,25,20,"_e"],[58,61,25,20],[59,6,25,20],[59,13,25,20,"reactNativeVisionCamera_runAsyncJs1"],[59,48,25,20],[60,4,25,20],[60,5,17,50],[60,7,34,3],[60,8,34,4],[61,2,35,0],[61,3,35,1],[61,4,35,2],[61,11,35,9,"e"],[61,12,35,10],[61,14,35,12],[62,4,36,2],[63,4,37,2],[64,4,38,2,"isAsyncContextBusy"],[64,22,38,20],[64,25,38,23],[65,6,39,4,"value"],[65,11,39,9],[65,13,39,11],[66,4,40,2],[66,5,40,3],[67,4,41,2,"runOnAsyncContext"],[67,21,41,19],[67,24,41,22,"runOnAsyncContext"],[67,25,41,22],[67,30,41,28],[68,6,42,4],[68,12,42,10],[68,16,42,14,"FrameProcessorsUnavailableError"],[68,48,42,45],[68,49,42,45,"FrameProcessorsUnavailableError"],[68,80,42,45],[68,81,42,46,"e"],[68,82,42,47],[68,83,42,48],[69,4,43,2],[69,5,43,3],[70,2,44,0],[72,2,46,0],[73,0,47,0],[74,0,48,0],[75,0,49,0],[76,0,50,0],[77,0,51,0],[78,0,52,0],[79,0,53,0],[80,0,54,0],[81,0,55,0],[82,0,56,0],[83,0,57,0],[84,0,58,0],[85,0,59,0],[86,0,60,0],[87,0,61,0],[88,0,62,0],[89,0,63,0],[90,0,64,0],[91,0,65,0],[92,0,66,0],[93,0,67,0],[94,0,68,0],[95,0,69,0],[96,0,70,0],[97,0,71,0],[98,0,72,0],[99,0,73,0],[100,0,74,0],[101,0,75,0],[102,0,76,0],[103,0,77,0],[104,0,78,0],[105,0,79,0],[106,0,80,0],[107,0,81,0],[108,0,82,0],[109,2,46,0],[109,8,46,0,"_worklet_13768994699248_init_data"],[109,41,46,0],[110,4,46,0,"code"],[110,8,46,0],[111,4,46,0,"location"],[111,12,46,0],[112,4,46,0,"sourceMap"],[112,13,46,0],[113,4,46,0,"version"],[113,11,46,0],[114,2,46,0],[115,2,46,0],[115,8,46,0,"runAsync"],[115,16,46,0],[115,19,83,7],[116,4,83,7],[116,10,83,7,"_e"],[116,12,83,7],[116,20,83,7,"global"],[116,26,83,7],[116,27,83,7,"Error"],[116,32,83,7],[117,4,83,7],[117,10,83,7,"runAsync"],[117,18,83,7],[117,30,83,7,"runAsync"],[117,31,83,25,"frame"],[117,36,83,30],[117,38,83,32,"func"],[117,42,83,36],[117,44,83,38],[118,6,86,2],[118,10,86,6,"isAsyncContextBusy"],[118,28,86,24],[118,29,86,25,"value"],[118,34,86,30],[118,36,86,32],[119,8,87,4],[120,8,88,4],[121,8,89,4],[122,6,90,2],[124,6,92,2],[125,6,93,2],[125,12,93,8,"internal"],[125,20,93,16],[125,23,93,19,"frame"],[125,28,93,24],[126,6,94,2,"internal"],[126,14,94,10],[126,15,94,11,"incrementRefCount"],[126,32,94,28],[126,33,94,29],[126,34,94,30],[127,6,95,2,"isAsyncContextBusy"],[127,24,95,20],[127,25,95,21,"value"],[127,30,95,26],[127,33,95,29],[127,37,95,33],[129,6,97,2],[130,6,98,2,"runOnAsyncContext"],[130,23,98,19],[130,24,98,20,"frame"],[130,29,98,25],[130,31,98,27,"func"],[130,35,98,31],[130,36,98,32],[131,4,99,0],[131,5,99,1],[132,4,99,1,"runAsync"],[132,12,99,1],[132,13,99,1,"__closure"],[132,22,99,1],[133,6,99,1,"isAsyncContextBusy"],[133,24,99,1],[134,6,99,1,"runOnAsyncContext"],[135,4,99,1],[136,4,99,1,"runAsync"],[136,12,99,1],[136,13,99,1,"__workletHash"],[136,26,99,1],[137,4,99,1,"runAsync"],[137,12,99,1],[137,13,99,1,"__initData"],[137,23,99,1],[137,26,99,1,"_worklet_13768994699248_init_data"],[137,59,99,1],[138,4,99,1,"runAsync"],[138,12,99,1],[138,13,99,1,"__stackDetails"],[138,27,99,1],[138,30,99,1,"_e"],[138,32,99,1],[139,4,99,1],[139,11,99,1,"runAsync"],[139,19,99,1],[140,2,99,1],[140,3,83,7],[141,0,83,7],[141,3]],"functionMap":{"names":["<global>","asyncContext.createRunAsync$argument_0","runOnAsyncContext","runAsync"],"mappings":"AAA;kDCgB;GDiB;sBEO;GFE;OGwC;CHgB"},"hasCjsExports":false},"type":"js/module"}]}