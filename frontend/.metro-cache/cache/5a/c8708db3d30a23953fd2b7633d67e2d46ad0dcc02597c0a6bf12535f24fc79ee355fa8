{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../../../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"3VKnEXkMY1ZNEkZ7qYjanQrdF3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"chatApi\", {\n    enumerable: true,\n    get: function () {\n      return chatApi;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _servicesApi = require(_dependencyMap[3], \"../../../services/api\");\n  var ChatApiService = /*#__PURE__*/function () {\n    function ChatApiService() {\n      (0, _classCallCheck.default)(this, ChatApiService);\n    }\n    return (0, _createClass.default)(ChatApiService, [{\n      key: \"getConversations\",\n      value: function () {\n        var _getConversations = (0, _asyncToGenerator.default)(function* () {\n          var skip = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;\n          var response = yield _servicesApi.api.get(`/conversations?skip=${skip}&limit=${limit}`);\n          return response.data;\n        });\n        function getConversations() {\n          return _getConversations.apply(this, arguments);\n        }\n        return getConversations;\n      }()\n    }, {\n      key: \"createConversation\",\n      value: function () {\n        var _createConversation = (0, _asyncToGenerator.default)(function* (data) {\n          var response = yield _servicesApi.api.post('/conversations', data);\n          return response.data;\n        });\n        function createConversation(_x) {\n          return _createConversation.apply(this, arguments);\n        }\n        return createConversation;\n      }()\n    }, {\n      key: \"getMessages\",\n      value: function () {\n        var _getMessages = (0, _asyncToGenerator.default)(function* (conversationId) {\n          var skip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var limit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 50;\n          var response = yield _servicesApi.api.get(`/conversations/${conversationId}/messages?skip=${skip}&limit=${limit}`);\n          return response.data;\n        });\n        function getMessages(_x2) {\n          return _getMessages.apply(this, arguments);\n        }\n        return getMessages;\n      }()\n    }, {\n      key: \"sendMessage\",\n      value: function () {\n        var _sendMessage = (0, _asyncToGenerator.default)(function* (conversationId, data) {\n          var messageData = {\n            ...data,\n            conversationId\n          };\n          var response = yield _servicesApi.api.post(`/conversations/${conversationId}/messages`, messageData);\n          return response.data;\n        });\n        function sendMessage(_x3, _x4) {\n          return _sendMessage.apply(this, arguments);\n        }\n        return sendMessage;\n      }() // Helper method to find or create a direct conversation with a user\n    }, {\n      key: \"getOrCreateDirectConversation\",\n      value: function () {\n        var _getOrCreateDirectConversation = (0, _asyncToGenerator.default)(function* (otherUserId) {\n          // First, try to find existing conversation\n          var conversations = yield this.getConversations();\n          var existing = conversations.find(conv => !conv.isGroup && conv.participants.length === 2 && conv.participants.some(p => p.id === otherUserId));\n          if (existing) {\n            return existing;\n          }\n\n          // Create new conversation\n          return yield this.createConversation({\n            participantIds: [otherUserId],\n            isGroup: false\n          });\n        });\n        function getOrCreateDirectConversation(_x5) {\n          return _getOrCreateDirectConversation.apply(this, arguments);\n        }\n        return getOrCreateDirectConversation;\n      }()\n    }]);\n  }();\n  var chatApi = new ChatApiService();\n});","lineCount":110,"map":[[12,2,102,0,"Object"],[12,8,102,0],[12,9,102,0,"defineProperty"],[12,23,102,0],[12,24,102,0,"exports"],[12,31,102,0],[13,4,102,0,"enumerable"],[13,14,102,0],[14,4,102,0,"get"],[14,7,102,0],[14,18,102,0,"get"],[14,19,102,0],[15,6,102,0],[15,13,102,0,"chatApi"],[15,20,102,0],[16,4,102,0],[17,2,102,0],[18,2,102,44],[18,6,102,44,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,102,44],[18,45,102,44,"require"],[18,52,102,44],[18,53,102,44,"_dependencyMap"],[18,67,102,44],[19,2,102,44],[19,6,102,44,"_asyncToGenerator"],[19,23,102,44],[19,26,102,44,"_interopDefault"],[19,41,102,44],[19,42,102,44,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,102,44],[20,2,102,44],[20,6,102,44,"_babelRuntimeHelpersClassCallCheck"],[20,40,102,44],[20,43,102,44,"require"],[20,50,102,44],[20,51,102,44,"_dependencyMap"],[20,65,102,44],[21,2,102,44],[21,6,102,44,"_classCallCheck"],[21,21,102,44],[21,24,102,44,"_interopDefault"],[21,39,102,44],[21,40,102,44,"_babelRuntimeHelpersClassCallCheck"],[21,74,102,44],[22,2,102,44],[22,6,102,44,"_babelRuntimeHelpersCreateClass"],[22,37,102,44],[22,40,102,44,"require"],[22,47,102,44],[22,48,102,44,"_dependencyMap"],[22,62,102,44],[23,2,102,44],[23,6,102,44,"_createClass"],[23,18,102,44],[23,21,102,44,"_interopDefault"],[23,36,102,44],[23,37,102,44,"_babelRuntimeHelpersCreateClass"],[23,68,102,44],[24,2,1,0],[24,6,1,0,"_servicesApi"],[24,18,1,0],[24,21,1,0,"require"],[24,28,1,0],[24,29,1,0,"_dependencyMap"],[24,43,1,0],[25,2,1,44],[25,6,55,6,"ChatApiService"],[25,20,55,20],[26,4,55,20],[26,13,55,20,"ChatApiService"],[26,28,55,20],[27,6,55,20],[27,10,55,20,"_classCallCheck"],[27,25,55,20],[27,26,55,20,"default"],[27,33,55,20],[27,41,55,20,"ChatApiService"],[27,55,55,20],[28,4,55,20],[29,4,55,20],[29,15,55,20,"_createClass"],[29,27,55,20],[29,28,55,20,"default"],[29,35,55,20],[29,37,55,20,"ChatApiService"],[29,51,55,20],[30,6,55,20,"key"],[30,9,55,20],[31,6,55,20,"value"],[31,11,55,20],[32,8,55,20],[32,12,55,20,"_getConversations"],[32,29,55,20],[32,36,55,20,"_asyncToGenerator"],[32,53,55,20],[32,54,55,20,"default"],[32,61,55,20],[32,63,56,2],[32,76,56,72],[33,10,56,72],[33,14,56,25,"skip"],[33,18,56,29],[33,21,56,29,"arguments"],[33,30,56,29],[33,31,56,29,"length"],[33,37,56,29],[33,45,56,29,"arguments"],[33,54,56,29],[33,62,56,29,"undefined"],[33,71,56,29],[33,74,56,29,"arguments"],[33,83,56,29],[33,89,56,32],[33,90,56,33],[34,10,56,33],[34,14,56,35,"limit"],[34,19,56,40],[34,22,56,40,"arguments"],[34,31,56,40],[34,32,56,40,"length"],[34,38,56,40],[34,46,56,40,"arguments"],[34,55,56,40],[34,63,56,40,"undefined"],[34,72,56,40],[34,75,56,40,"arguments"],[34,84,56,40],[34,90,56,43],[34,92,56,45],[35,10,57,4],[35,14,57,10,"response"],[35,22,57,18],[35,31,57,27,"api"],[35,43,57,30],[35,44,57,30,"api"],[35,47,57,30],[35,48,57,31,"get"],[35,51,57,34],[35,52,57,35],[35,75,57,58,"skip"],[35,79,57,62],[35,89,57,72,"limit"],[35,94,57,77],[35,96,57,79],[35,97,57,80],[36,10,58,4],[36,17,58,11,"response"],[36,25,58,19],[36,26,58,20,"data"],[36,30,58,24],[37,8,59,2],[37,9,59,3],[38,8,59,3],[38,17,56,8,"getConversations"],[38,33,56,24,"getConversations"],[38,34,56,24],[39,10,56,24],[39,17,56,24,"_getConversations"],[39,34,56,24],[39,35,56,24,"apply"],[39,40,56,24],[39,47,56,24,"arguments"],[39,56,56,24],[40,8,56,24],[41,8,56,24],[41,15,56,8,"getConversations"],[41,31,56,24],[42,6,56,24],[43,4,56,24],[44,6,56,24,"key"],[44,9,56,24],[45,6,56,24,"value"],[45,11,56,24],[46,8,56,24],[46,12,56,24,"_createConversation"],[46,31,56,24],[46,38,56,24,"_asyncToGenerator"],[46,55,56,24],[46,56,56,24,"default"],[46,63,56,24],[46,65,61,2],[46,76,61,27,"data"],[46,80,61,55],[46,82,61,80],[47,10,62,4],[47,14,62,10,"response"],[47,22,62,18],[47,31,62,27,"api"],[47,43,62,30],[47,44,62,30,"api"],[47,47,62,30],[47,48,62,31,"post"],[47,52,62,35],[47,53,62,36],[47,69,62,52],[47,71,62,54,"data"],[47,75,62,58],[47,76,62,59],[48,10,63,4],[48,17,63,11,"response"],[48,25,63,19],[48,26,63,20,"data"],[48,30,63,24],[49,8,64,2],[49,9,64,3],[50,8,64,3],[50,17,61,8,"createConversation"],[50,35,61,26,"createConversation"],[50,36,61,26,"_x"],[50,38,61,26],[51,10,61,26],[51,17,61,26,"_createConversation"],[51,36,61,26],[51,37,61,26,"apply"],[51,42,61,26],[51,49,61,26,"arguments"],[51,58,61,26],[52,8,61,26],[53,8,61,26],[53,15,61,8,"createConversation"],[53,33,61,26],[54,6,61,26],[55,4,61,26],[56,6,61,26,"key"],[56,9,61,26],[57,6,61,26,"value"],[57,11,61,26],[58,8,61,26],[58,12,61,26,"_getMessages"],[58,24,61,26],[58,31,61,26,"_asyncToGenerator"],[58,48,61,26],[58,49,61,26,"default"],[58,56,61,26],[58,58,66,2],[58,69,66,20,"conversationId"],[58,83,66,42],[58,85,66,86],[59,10,66,86],[59,14,66,44,"skip"],[59,18,66,48],[59,21,66,48,"arguments"],[59,30,66,48],[59,31,66,48,"length"],[59,37,66,48],[59,45,66,48,"arguments"],[59,54,66,48],[59,62,66,48,"undefined"],[59,71,66,48],[59,74,66,48,"arguments"],[59,83,66,48],[59,89,66,51],[59,90,66,52],[60,10,66,52],[60,14,66,54,"limit"],[60,19,66,59],[60,22,66,59,"arguments"],[60,31,66,59],[60,32,66,59,"length"],[60,38,66,59],[60,46,66,59,"arguments"],[60,55,66,59],[60,63,66,59,"undefined"],[60,72,66,59],[60,75,66,59,"arguments"],[60,84,66,59],[60,90,66,62],[60,92,66,64],[61,10,67,4],[61,14,67,10,"response"],[61,22,67,18],[61,31,67,27,"api"],[61,43,67,30],[61,44,67,30,"api"],[61,47,67,30],[61,48,67,31,"get"],[61,51,67,34],[61,52,67,35],[61,70,67,53,"conversationId"],[61,84,67,67],[61,102,67,85,"skip"],[61,106,67,89],[61,116,67,99,"limit"],[61,121,67,104],[61,123,67,106],[61,124,67,107],[62,10,68,4],[62,17,68,11,"response"],[62,25,68,19],[62,26,68,20,"data"],[62,30,68,24],[63,8,69,2],[63,9,69,3],[64,8,69,3],[64,17,66,8,"getMessages"],[64,28,66,19,"getMessages"],[64,29,66,19,"_x2"],[64,32,66,19],[65,10,66,19],[65,17,66,19,"_getMessages"],[65,29,66,19],[65,30,66,19,"apply"],[65,35,66,19],[65,42,66,19,"arguments"],[65,51,66,19],[66,8,66,19],[67,8,66,19],[67,15,66,8,"getMessages"],[67,26,66,19],[68,6,66,19],[69,4,66,19],[70,6,66,19,"key"],[70,9,66,19],[71,6,66,19,"value"],[71,11,66,19],[72,8,66,19],[72,12,66,19,"_sendMessage"],[72,24,66,19],[72,31,66,19,"_asyncToGenerator"],[72,48,66,19],[72,49,66,19,"default"],[72,56,66,19],[72,58,71,2],[72,69,71,20,"conversationId"],[72,83,71,42],[72,85,71,44,"data"],[72,89,71,65],[72,91,71,85],[73,10,72,4],[73,14,72,10,"messageData"],[73,25,72,21],[73,28,72,24],[74,12,73,6],[74,15,73,9,"data"],[74,19,73,13],[75,12,74,6,"conversationId"],[76,10,75,4],[76,11,75,5],[77,10,76,4],[77,14,76,10,"response"],[77,22,76,18],[77,31,76,27,"api"],[77,43,76,30],[77,44,76,30,"api"],[77,47,76,30],[77,48,76,31,"post"],[77,52,76,35],[77,53,76,36],[77,71,76,54,"conversationId"],[77,85,76,68],[77,96,76,79],[77,98,76,81,"messageData"],[77,109,76,92],[77,110,76,93],[78,10,77,4],[78,17,77,11,"response"],[78,25,77,19],[78,26,77,20,"data"],[78,30,77,24],[79,8,78,2],[79,9,78,3],[80,8,78,3],[80,17,71,8,"sendMessage"],[80,28,71,19,"sendMessage"],[80,29,71,19,"_x3"],[80,32,71,19],[80,34,71,19,"_x4"],[80,37,71,19],[81,10,71,19],[81,17,71,19,"_sendMessage"],[81,29,71,19],[81,30,71,19,"apply"],[81,35,71,19],[81,42,71,19,"arguments"],[81,51,71,19],[82,8,71,19],[83,8,71,19],[83,15,71,8,"sendMessage"],[83,26,71,19],[84,6,71,19],[84,10,80,2],[85,4,80,2],[86,6,80,2,"key"],[86,9,80,2],[87,6,80,2,"value"],[87,11,80,2],[88,8,80,2],[88,12,80,2,"_getOrCreateDirectConversation"],[88,42,80,2],[88,49,80,2,"_asyncToGenerator"],[88,66,80,2],[88,67,80,2,"default"],[88,74,80,2],[88,76,81,2],[88,87,81,38,"otherUserId"],[88,98,81,57],[88,100,81,82],[89,10,82,4],[90,10,83,4],[90,14,83,10,"conversations"],[90,27,83,23],[90,36,83,32],[90,40,83,36],[90,41,83,37,"getConversations"],[90,57,83,53],[90,58,83,54],[90,59,83,55],[91,10,84,4],[91,14,84,10,"existing"],[91,22,84,18],[91,25,84,21,"conversations"],[91,38,84,34],[91,39,84,35,"find"],[91,43,84,39],[91,44,84,40,"conv"],[91,48,84,44],[91,52,85,6],[91,53,85,7,"conv"],[91,57,85,11],[91,58,85,12,"isGroup"],[91,65,85,19],[91,69,86,6,"conv"],[91,73,86,10],[91,74,86,11,"participants"],[91,86,86,23],[91,87,86,24,"length"],[91,93,86,30],[91,98,86,35],[91,99,86,36],[91,103,87,6,"conv"],[91,107,87,10],[91,108,87,11,"participants"],[91,120,87,23],[91,121,87,24,"some"],[91,125,87,28],[91,126,87,29,"p"],[91,127,87,30],[91,131,87,34,"p"],[91,132,87,35],[91,133,87,36,"id"],[91,135,87,38],[91,140,87,43,"otherUserId"],[91,151,87,54],[91,152,88,4],[91,153,88,5],[92,10,90,4],[92,14,90,8,"existing"],[92,22,90,16],[92,24,90,18],[93,12,91,6],[93,19,91,13,"existing"],[93,27,91,21],[94,10,92,4],[96,10,94,4],[97,10,95,4],[97,23,95,17],[97,27,95,21],[97,28,95,22,"createConversation"],[97,46,95,40],[97,47,95,41],[98,12,96,6,"participantIds"],[98,26,96,20],[98,28,96,22],[98,29,96,23,"otherUserId"],[98,40,96,34],[98,41,96,35],[99,12,97,6,"isGroup"],[99,19,97,13],[99,21,97,15],[100,10,98,4],[100,11,98,5],[100,12,98,6],[101,8,99,2],[101,9,99,3],[102,8,99,3],[102,17,81,8,"getOrCreateDirectConversation"],[102,46,81,37,"getOrCreateDirectConversation"],[102,47,81,37,"_x5"],[102,50,81,37],[103,10,81,37],[103,17,81,37,"_getOrCreateDirectConversation"],[103,47,81,37],[103,48,81,37,"apply"],[103,53,81,37],[103,60,81,37,"arguments"],[103,69,81,37],[104,8,81,37],[105,8,81,37],[105,15,81,8,"getOrCreateDirectConversation"],[105,44,81,37],[106,6,81,37],[107,4,81,37],[108,2,81,37],[109,2,102,7],[109,6,102,13,"chatApi"],[109,13,102,20],[109,16,102,23],[109,20,102,27,"ChatApiService"],[109,34,102,41],[109,35,102,42],[109,36,102,43],[110,0,102,44],[110,3]],"functionMap":{"names":["<global>","ChatApiService","ChatApiService#getConversations","ChatApiService#createConversation","ChatApiService#getMessages","ChatApiService#sendMessage","ChatApiService#getOrCreateDirectConversation","conversations.find$argument_0","conv.participants.some$argument_0"],"mappings":"AAA;ACsD;ECC;GDG;EEE;GFG;EGE;GHG;EIE;GJO;EKG;wCCG;6BCG,yBD,CD;GLY;CDC"},"hasCjsExports":false},"type":"js/module"}]}