{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":64,"index":64}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":65},"end":{"line":7,"column":22,"index":148}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":149},"end":{"line":8,"column":59,"index":208}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"./ui/header/ChatHeader","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":209},"end":{"line":9,"column":52,"index":261}}],"key":"Ua6ImQgN1IXo5hhsUmw7KnrwkCo=","exportNames":["*"],"imports":1}},{"name":"./ui/messages/MessagesList","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":262},"end":{"line":10,"column":58,"index":320}}],"key":"b0NVpYxbbEzBbh3XUY+Xm/UOwfw=","exportNames":["*"],"imports":1}},{"name":"./ui/input/ChatInput","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":321},"end":{"line":11,"column":49,"index":370}}],"key":"UUz9LSQmG/TcS4dXQvr/gHEqUTg=","exportNames":["*"],"imports":1}},{"name":"../../services/socketService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":371},"end":{"line":12,"column":57,"index":428}}],"key":"X+Kco1lS53SFj1vipt6tcIUgjwA=","exportNames":["*"],"imports":1}},{"name":"../../services/chatApi","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":429},"end":{"line":13,"column":49,"index":478}}],"key":"h7G0hZvVCG05aR9/JPBRMLiqVpU=","exportNames":["*"],"imports":1}},{"name":"../../../../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":479},"end":{"line":14,"column":66,"index":545}}],"key":"kvCltqUmtmllAM05iXPJ4kqanso=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/features/messaging/components/chat/ChatScreen.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"ChatScreen\", {\n    enumerable: true,\n    get: function () {\n      return ChatScreen;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _expoRouter = require(_dependencyMap[4], \"expo-router\");\n  var _uiHeaderChatHeader = require(_dependencyMap[5], \"./ui/header/ChatHeader\");\n  var _uiMessagesMessagesList = require(_dependencyMap[6], \"./ui/messages/MessagesList\");\n  var _uiInputChatInput = require(_dependencyMap[7], \"./ui/input/ChatInput\");\n  var _servicesSocketService = require(_dependencyMap[8], \"../../services/socketService\");\n  var _servicesChatApi = require(_dependencyMap[9], \"../../services/chatApi\");\n  var _contextsAuthContext = require(_dependencyMap[10], \"../../../../contexts/AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[11], \"react/jsx-dev-runtime\");\n  var ChatScreen = () => {\n    _s();\n    var _useLocalSearchParams = (0, _expoRouter.useLocalSearchParams)(),\n      conversationId = _useLocalSearchParams.conversationId;\n    var _useAuthContext = (0, _contextsAuthContext.useAuthContext)(),\n      user = _useAuthContext.user;\n    var _useSocket = (0, _servicesSocketService.useSocket)(),\n      socket = _useSocket.socket,\n      joinConversation = _useSocket.joinConversation,\n      leaveConversation = _useSocket.leaveConversation;\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      conversation = _useState2[0],\n      setConversation = _useState2[1];\n    var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n    var _useState5 = (0, _react.useState)(true),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n    var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      sendingMessage = _useState8[0],\n      setSendingMessage = _useState8[1];\n    var loadConversation = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!conversationId || !user) return;\n      try {\n        var conversations = yield _servicesChatApi.chatApi.getConversations();\n        var conv = conversations.find(c => c.id === conversationId);\n        if (conv) {\n          setConversation(conv);\n        }\n      } catch (error) {\n        console.error('Failed to load conversation:', error);\n        _reactNative.Alert.alert('Error', 'Failed to load conversation');\n      }\n    }), [conversationId, user]);\n    var loadMessages = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!conversationId) return;\n      try {\n        var messagesData = yield _servicesChatApi.chatApi.getMessages(conversationId);\n        setMessages(messagesData);\n      } catch (error) {\n        console.error('Failed to load messages:', error);\n        _reactNative.Alert.alert('Error', 'Failed to load messages');\n      } finally {\n        setLoading(false);\n      }\n    }), [conversationId]);\n    var handleSendMessage = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (messageData) {\n        if (!conversationId || !user || sendingMessage) return;\n        setSendingMessage(true);\n        try {\n          var newMessage = yield _servicesChatApi.chatApi.sendMessage(conversationId, messageData);\n          setMessages(prev => [newMessage, ...prev]);\n        } catch (error) {\n          console.error('Failed to send message:', error);\n          _reactNative.Alert.alert('Error', 'Failed to send message');\n        } finally {\n          setSendingMessage(false);\n        }\n      });\n      return function handleSendMessage(_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var handleNewMessage = (0, _react.useCallback)(data => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => {\n          var existsIndex = prev.findIndex(m => m.id === data.message.id);\n          if (existsIndex >= 0) {\n            return prev; // Message already exists\n          }\n          return [data.message, ...prev];\n        });\n      }\n    }, [conversationId]);\n    (0, _react.useEffect)(() => {\n      if (conversationId && user) {\n        loadConversation();\n        loadMessages();\n        joinConversation(conversationId);\n      }\n      return () => {\n        if (conversationId) {\n          leaveConversation(conversationId);\n        }\n      };\n    }, [conversationId, user, loadConversation, loadMessages, joinConversation, leaveConversation]);\n    (0, _react.useEffect)(() => {\n      if (socket) {\n        socket.on('new_message', handleNewMessage);\n        return () => {\n          socket.off('new_message', handleNewMessage);\n        };\n      }\n    }, [socket, handleNewMessage]);\n    if (loading) {\n      return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n        style: styles.loadingContainer,\n        children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.ActivityIndicator, {\n          size: \"large\",\n          color: \"#667eea\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }, this);\n    }\n    if (!conversation || !user) {\n      return null;\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_uiHeaderChatHeader.ChatHeader, {\n        conversation: conversation,\n        currentUserId: user.id,\n        onBack: () => _expoRouter.router.back(),\n        onProfile: () => {/* Navigate to profile */}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_uiMessagesMessagesList.MessagesList, {\n        messages: messages,\n        currentUserId: user.id,\n        onEndReached: loadMessages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_uiInputChatInput.ChatInput, {\n        onSendMessage: handleSendMessage,\n        disabled: sendingMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }, this);\n  };\n  _s(ChatScreen, \"I8hLuVqigaNdIJZR4dPBygfqz9U=\", false, function () {\n    return [_expoRouter.useLocalSearchParams, _contextsAuthContext.useAuthContext, _servicesSocketService.useSocket];\n  });\n  _c = ChatScreen;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#ffffff'\n    },\n    loadingContainer: {\n      flex: 1,\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: '#ffffff'\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"ChatScreen\");\n});","lineCount":205,"map":[[14,2,47,0,"Object"],[14,8,47,0],[14,9,47,0,"defineProperty"],[14,23,47,0],[14,24,47,0,"exports"],[14,31,47,0],[15,4,47,0,"enumerable"],[15,14,47,0],[16,4,47,0,"get"],[16,7,47,0],[16,18,47,0,"get"],[16,19,47,0],[17,6,47,0],[17,13,47,0,"ChatScreen"],[17,23,47,0],[18,4,47,0],[19,2,47,0],[20,2,169,2],[20,6,169,2,"_babelRuntimeHelpersAsyncToGenerator"],[20,42,169,2],[20,45,169,2,"require"],[20,52,169,2],[20,53,169,2,"_dependencyMap"],[20,67,169,2],[21,2,169,2],[21,6,169,2,"_asyncToGenerator"],[21,23,169,2],[21,26,169,2,"_interopDefault"],[21,41,169,2],[21,42,169,2,"_babelRuntimeHelpersAsyncToGenerator"],[21,78,169,2],[22,2,169,2],[22,6,169,2,"_babelRuntimeHelpersSlicedToArray"],[22,39,169,2],[22,42,169,2,"require"],[22,49,169,2],[22,50,169,2,"_dependencyMap"],[22,64,169,2],[23,2,169,2],[23,6,169,2,"_slicedToArray"],[23,20,169,2],[23,23,169,2,"_interopDefault"],[23,38,169,2],[23,39,169,2,"_babelRuntimeHelpersSlicedToArray"],[23,72,169,2],[24,2,1,0],[24,6,1,0,"_react"],[24,12,1,0],[24,15,1,0,"require"],[24,22,1,0],[24,23,1,0,"_dependencyMap"],[24,37,1,0],[25,2,2,0],[25,6,2,0,"_reactNative"],[25,18,2,0],[25,21,2,0,"require"],[25,28,2,0],[25,29,2,0,"_dependencyMap"],[25,43,2,0],[26,2,8,0],[26,6,8,0,"_expoRouter"],[26,17,8,0],[26,20,8,0,"require"],[26,27,8,0],[26,28,8,0,"_dependencyMap"],[26,42,8,0],[27,2,9,0],[27,6,9,0,"_uiHeaderChatHeader"],[27,25,9,0],[27,28,9,0,"require"],[27,35,9,0],[27,36,9,0,"_dependencyMap"],[27,50,9,0],[28,2,10,0],[28,6,10,0,"_uiMessagesMessagesList"],[28,29,10,0],[28,32,10,0,"require"],[28,39,10,0],[28,40,10,0,"_dependencyMap"],[28,54,10,0],[29,2,11,0],[29,6,11,0,"_uiInputChatInput"],[29,23,11,0],[29,26,11,0,"require"],[29,33,11,0],[29,34,11,0,"_dependencyMap"],[29,48,11,0],[30,2,12,0],[30,6,12,0,"_servicesSocketService"],[30,28,12,0],[30,31,12,0,"require"],[30,38,12,0],[30,39,12,0,"_dependencyMap"],[30,53,12,0],[31,2,13,0],[31,6,13,0,"_servicesChatApi"],[31,22,13,0],[31,25,13,0,"require"],[31,32,13,0],[31,33,13,0,"_dependencyMap"],[31,47,13,0],[32,2,14,0],[32,6,14,0,"_contextsAuthContext"],[32,26,14,0],[32,29,14,0,"require"],[32,36,14,0],[32,37,14,0,"_dependencyMap"],[32,51,14,0],[33,2,14,66],[33,6,14,66,"_reactJsxDevRuntime"],[33,25,14,66],[33,28,14,66,"require"],[33,35,14,66],[33,36,14,66,"_dependencyMap"],[33,50,14,66],[34,2,47,7],[34,6,47,13,"ChatScreen"],[34,16,47,33],[34,19,47,36,"ChatScreen"],[34,20,47,36],[34,25,47,42],[35,4,47,42,"_s"],[35,6,47,42],[36,4,48,2],[36,8,48,2,"_useLocalSearchParams"],[36,29,48,2],[36,32,48,29],[36,36,48,29,"useLocalSearchParams"],[36,47,48,49],[36,48,48,49,"useLocalSearchParams"],[36,68,48,49],[36,70,48,78],[36,71,48,79],[37,6,48,10,"conversationId"],[37,20,48,24],[37,23,48,24,"_useLocalSearchParams"],[37,44,48,24],[37,45,48,10,"conversationId"],[37,59,48,24],[38,4,49,2],[38,8,49,2,"_useAuthContext"],[38,23,49,2],[38,26,49,19],[38,30,49,19,"useAuthContext"],[38,50,49,33],[38,51,49,33,"useAuthContext"],[38,65,49,33],[38,67,49,34],[38,68,49,35],[39,6,49,10,"user"],[39,10,49,14],[39,13,49,14,"_useAuthContext"],[39,28,49,14],[39,29,49,10,"user"],[39,33,49,14],[40,4,50,2],[40,8,50,2,"_useSocket"],[40,18,50,2],[40,21,50,58],[40,25,50,58,"useSocket"],[40,47,50,67],[40,48,50,67,"useSocket"],[40,57,50,67],[40,59,50,68],[40,60,50,69],[41,6,50,10,"socket"],[41,12,50,16],[41,15,50,16,"_useSocket"],[41,25,50,16],[41,26,50,10,"socket"],[41,32,50,16],[42,6,50,18,"joinConversation"],[42,22,50,34],[42,25,50,34,"_useSocket"],[42,35,50,34],[42,36,50,18,"joinConversation"],[42,52,50,34],[43,6,50,36,"leaveConversation"],[43,23,50,53],[43,26,50,53,"_useSocket"],[43,36,50,53],[43,37,50,36,"leaveConversation"],[43,54,50,53],[44,4,52,2],[44,8,52,2,"_useState"],[44,17,52,2],[44,20,52,42],[44,24,52,42,"useState"],[44,30,52,50],[44,31,52,50,"useState"],[44,39,52,50],[44,41,52,72],[44,45,52,76],[44,46,52,77],[45,6,52,77,"_useState2"],[45,16,52,77],[45,23,52,77,"_slicedToArray"],[45,37,52,77],[45,38,52,77,"default"],[45,45,52,77],[45,47,52,77,"_useState"],[45,56,52,77],[46,6,52,9,"conversation"],[46,18,52,21],[46,21,52,21,"_useState2"],[46,31,52,21],[47,6,52,23,"setConversation"],[47,21,52,38],[47,24,52,38,"_useState2"],[47,34,52,38],[48,4,53,2],[48,8,53,2,"_useState3"],[48,18,53,2],[48,21,53,34],[48,25,53,34,"useState"],[48,31,53,42],[48,32,53,42,"useState"],[48,40,53,42],[48,42,53,54],[48,44,53,56],[48,45,53,57],[49,6,53,57,"_useState4"],[49,16,53,57],[49,23,53,57,"_slicedToArray"],[49,37,53,57],[49,38,53,57,"default"],[49,45,53,57],[49,47,53,57,"_useState3"],[49,57,53,57],[50,6,53,9,"messages"],[50,14,53,17],[50,17,53,17,"_useState4"],[50,27,53,17],[51,6,53,19,"setMessages"],[51,17,53,30],[51,20,53,30,"_useState4"],[51,30,53,30],[52,4,54,2],[52,8,54,2,"_useState5"],[52,18,54,2],[52,21,54,32],[52,25,54,32,"useState"],[52,31,54,40],[52,32,54,40,"useState"],[52,40,54,40],[52,42,54,41],[52,46,54,45],[52,47,54,46],[53,6,54,46,"_useState6"],[53,16,54,46],[53,23,54,46,"_slicedToArray"],[53,37,54,46],[53,38,54,46,"default"],[53,45,54,46],[53,47,54,46,"_useState5"],[53,57,54,46],[54,6,54,9,"loading"],[54,13,54,16],[54,16,54,16,"_useState6"],[54,26,54,16],[55,6,54,18,"setLoading"],[55,16,54,28],[55,19,54,28,"_useState6"],[55,29,54,28],[56,4,55,2],[56,8,55,2,"_useState7"],[56,18,55,2],[56,21,55,46],[56,25,55,46,"useState"],[56,31,55,54],[56,32,55,54,"useState"],[56,40,55,54],[56,42,55,55],[56,47,55,60],[56,48,55,61],[57,6,55,61,"_useState8"],[57,16,55,61],[57,23,55,61,"_slicedToArray"],[57,37,55,61],[57,38,55,61,"default"],[57,45,55,61],[57,47,55,61,"_useState7"],[57,57,55,61],[58,6,55,9,"sendingMessage"],[58,20,55,23],[58,23,55,23,"_useState8"],[58,33,55,23],[59,6,55,25,"setSendingMessage"],[59,23,55,42],[59,26,55,42,"_useState8"],[59,36,55,42],[60,4,57,2],[60,8,57,8,"loadConversation"],[60,24,57,24],[60,27,57,27],[60,31,57,27,"useCallback"],[60,37,57,38],[60,38,57,38,"useCallback"],[60,49,57,38],[60,68,57,38,"_asyncToGenerator"],[60,85,57,38],[60,86,57,38,"default"],[60,93,57,38],[60,95,57,39],[60,108,57,51],[61,6,58,4],[61,10,58,8],[61,11,58,9,"conversationId"],[61,25,58,23],[61,29,58,27],[61,30,58,28,"user"],[61,34,58,32],[61,36,58,34],[62,6,60,4],[62,10,60,8],[63,8,61,6],[63,12,61,12,"conversations"],[63,25,61,25],[63,34,61,34,"chatApi"],[63,50,61,41],[63,51,61,41,"chatApi"],[63,58,61,41],[63,59,61,42,"getConversations"],[63,75,61,58],[63,76,61,59],[63,77,61,60],[64,8,62,6],[64,12,62,12,"conv"],[64,16,62,16],[64,19,62,19,"conversations"],[64,32,62,32],[64,33,62,33,"find"],[64,37,62,37],[64,38,62,38,"c"],[64,39,62,39],[64,43,62,43,"c"],[64,44,62,44],[64,45,62,45,"id"],[64,47,62,47],[64,52,62,52,"conversationId"],[64,66,62,66],[64,67,62,67],[65,8,63,6],[65,12,63,10,"conv"],[65,16,63,14],[65,18,63,16],[66,10,64,8,"setConversation"],[66,25,64,23],[66,26,64,24,"conv"],[66,30,64,28],[66,31,64,29],[67,8,65,6],[68,6,66,4],[68,7,66,5],[68,8,66,6],[68,15,66,13,"error"],[68,20,66,18],[68,22,66,20],[69,8,67,6,"console"],[69,15,67,13],[69,16,67,14,"error"],[69,21,67,19],[69,22,67,20],[69,52,67,50],[69,54,67,52,"error"],[69,59,67,57],[69,60,67,58],[70,8,68,6,"Alert"],[70,20,68,11],[70,21,68,11,"Alert"],[70,26,68,11],[70,27,68,12,"alert"],[70,32,68,17],[70,33,68,18],[70,40,68,25],[70,42,68,27],[70,71,68,56],[70,72,68,57],[71,6,69,4],[72,4,70,2],[72,5,70,3],[72,8,70,5],[72,9,70,6,"conversationId"],[72,23,70,20],[72,25,70,22,"user"],[72,29,70,26],[72,30,70,27],[72,31,70,28],[73,4,72,2],[73,8,72,8,"loadMessages"],[73,20,72,20],[73,23,72,23],[73,27,72,23,"useCallback"],[73,33,72,34],[73,34,72,34,"useCallback"],[73,45,72,34],[73,64,72,34,"_asyncToGenerator"],[73,81,72,34],[73,82,72,34,"default"],[73,89,72,34],[73,91,72,35],[73,104,72,47],[74,6,73,4],[74,10,73,8],[74,11,73,9,"conversationId"],[74,25,73,23],[74,27,73,25],[75,6,75,4],[75,10,75,8],[76,8,76,6],[76,12,76,12,"messagesData"],[76,24,76,24],[76,33,76,33,"chatApi"],[76,49,76,40],[76,50,76,40,"chatApi"],[76,57,76,40],[76,58,76,41,"getMessages"],[76,69,76,52],[76,70,76,53,"conversationId"],[76,84,76,67],[76,85,76,68],[77,8,77,6,"setMessages"],[77,19,77,17],[77,20,77,18,"messagesData"],[77,32,77,30],[77,33,77,31],[78,6,78,4],[78,7,78,5],[78,8,78,6],[78,15,78,13,"error"],[78,20,78,18],[78,22,78,20],[79,8,79,6,"console"],[79,15,79,13],[79,16,79,14,"error"],[79,21,79,19],[79,22,79,20],[79,48,79,46],[79,50,79,48,"error"],[79,55,79,53],[79,56,79,54],[80,8,80,6,"Alert"],[80,20,80,11],[80,21,80,11,"Alert"],[80,26,80,11],[80,27,80,12,"alert"],[80,32,80,17],[80,33,80,18],[80,40,80,25],[80,42,80,27],[80,67,80,52],[80,68,80,53],[81,6,81,4],[81,7,81,5],[81,16,81,14],[82,8,82,6,"setLoading"],[82,18,82,16],[82,19,82,17],[82,24,82,22],[82,25,82,23],[83,6,83,4],[84,4,84,2],[84,5,84,3],[84,8,84,5],[84,9,84,6,"conversationId"],[84,23,84,20],[84,24,84,21],[84,25,84,22],[85,4,86,2],[85,8,86,8,"handleSendMessage"],[85,25,86,25],[86,6,86,25],[86,10,86,25,"_ref3"],[86,15,86,25],[86,22,86,25,"_asyncToGenerator"],[86,39,86,25],[86,40,86,25,"default"],[86,47,86,25],[86,49,86,28],[86,60,86,35,"messageData"],[86,71,86,102],[86,73,86,107],[87,8,87,4],[87,12,87,8],[87,13,87,9,"conversationId"],[87,27,87,23],[87,31,87,27],[87,32,87,28,"user"],[87,36,87,32],[87,40,87,36,"sendingMessage"],[87,54,87,50],[87,56,87,52],[88,8,89,4,"setSendingMessage"],[88,25,89,21],[88,26,89,22],[88,30,89,26],[88,31,89,27],[89,8,90,4],[89,12,90,8],[90,10,91,6],[90,14,91,12,"newMessage"],[90,24,91,22],[90,33,91,31,"chatApi"],[90,49,91,38],[90,50,91,38,"chatApi"],[90,57,91,38],[90,58,91,39,"sendMessage"],[90,69,91,50],[90,70,91,51,"conversationId"],[90,84,91,65],[90,86,91,67,"messageData"],[90,97,91,78],[90,98,91,79],[91,10,92,6,"setMessages"],[91,21,92,17],[91,22,92,18,"prev"],[91,26,92,22],[91,30,92,26],[91,31,92,27,"newMessage"],[91,41,92,37],[91,43,92,39],[91,46,92,42,"prev"],[91,50,92,46],[91,51,92,47],[91,52,92,48],[92,8,93,4],[92,9,93,5],[92,10,93,6],[92,17,93,13,"error"],[92,22,93,18],[92,24,93,20],[93,10,94,6,"console"],[93,17,94,13],[93,18,94,14,"error"],[93,23,94,19],[93,24,94,20],[93,49,94,45],[93,51,94,47,"error"],[93,56,94,52],[93,57,94,53],[94,10,95,6,"Alert"],[94,22,95,11],[94,23,95,11,"Alert"],[94,28,95,11],[94,29,95,12,"alert"],[94,34,95,17],[94,35,95,18],[94,42,95,25],[94,44,95,27],[94,68,95,51],[94,69,95,52],[95,8,96,4],[95,9,96,5],[95,18,96,14],[96,10,97,6,"setSendingMessage"],[96,27,97,23],[96,28,97,24],[96,33,97,29],[96,34,97,30],[97,8,98,4],[98,6,99,2],[98,7,99,3],[99,6,99,3],[99,22,86,8,"handleSendMessage"],[99,39,86,25,"handleSendMessage"],[99,40,86,25,"_x"],[99,42,86,25],[100,8,86,25],[100,15,86,25,"_ref3"],[100,20,86,25],[100,21,86,25,"apply"],[100,26,86,25],[100,33,86,25,"arguments"],[100,42,86,25],[101,6,86,25],[102,4,86,25],[102,7,99,3],[103,4,101,2],[103,8,101,8,"handleNewMessage"],[103,24,101,24],[103,27,101,27],[103,31,101,27,"useCallback"],[103,37,101,38],[103,38,101,38,"useCallback"],[103,49,101,38],[103,51,101,40,"data"],[103,55,101,90],[103,59,101,95],[104,6,102,4],[104,10,102,8,"data"],[104,14,102,12],[104,15,102,13,"conversationId"],[104,29,102,27],[104,34,102,32,"conversationId"],[104,48,102,46],[104,50,102,48],[105,8,103,6,"setMessages"],[105,19,103,17],[105,20,103,18,"prev"],[105,24,103,22],[105,28,103,26],[106,10,104,8],[106,14,104,14,"existsIndex"],[106,25,104,25],[106,28,104,28,"prev"],[106,32,104,32],[106,33,104,33,"findIndex"],[106,42,104,42],[106,43,104,43,"m"],[106,44,104,44],[106,48,104,48,"m"],[106,49,104,49],[106,50,104,50,"id"],[106,52,104,52],[106,57,104,57,"data"],[106,61,104,61],[106,62,104,62,"message"],[106,69,104,69],[106,70,104,70,"id"],[106,72,104,72],[106,73,104,73],[107,10,105,8],[107,14,105,12,"existsIndex"],[107,25,105,23],[107,29,105,27],[107,30,105,28],[107,32,105,30],[108,12,106,10],[108,19,106,17,"prev"],[108,23,106,21],[108,24,106,22],[108,25,106,23],[109,10,107,8],[110,10,108,8],[110,17,108,15],[110,18,108,16,"data"],[110,22,108,20],[110,23,108,21,"message"],[110,30,108,28],[110,32,108,30],[110,35,108,33,"prev"],[110,39,108,37],[110,40,108,38],[111,8,109,6],[111,9,109,7],[111,10,109,8],[112,6,110,4],[113,4,111,2],[113,5,111,3],[113,7,111,5],[113,8,111,6,"conversationId"],[113,22,111,20],[113,23,111,21],[113,24,111,22],[114,4,113,2],[114,8,113,2,"useEffect"],[114,14,113,11],[114,15,113,11,"useEffect"],[114,24,113,11],[114,26,113,12],[114,32,113,18],[115,6,114,4],[115,10,114,8,"conversationId"],[115,24,114,22],[115,28,114,26,"user"],[115,32,114,30],[115,34,114,32],[116,8,115,6,"loadConversation"],[116,24,115,22],[116,25,115,23],[116,26,115,24],[117,8,116,6,"loadMessages"],[117,20,116,18],[117,21,116,19],[117,22,116,20],[118,8,117,6,"joinConversation"],[118,24,117,22],[118,25,117,23,"conversationId"],[118,39,117,37],[118,40,117,38],[119,6,118,4],[120,6,120,4],[120,13,120,11],[120,19,120,17],[121,8,121,6],[121,12,121,10,"conversationId"],[121,26,121,24],[121,28,121,26],[122,10,122,8,"leaveConversation"],[122,27,122,25],[122,28,122,26,"conversationId"],[122,42,122,40],[122,43,122,41],[123,8,123,6],[124,6,124,4],[124,7,124,5],[125,4,125,2],[125,5,125,3],[125,7,125,5],[125,8,125,6,"conversationId"],[125,22,125,20],[125,24,125,22,"user"],[125,28,125,26],[125,30,125,28,"loadConversation"],[125,46,125,44],[125,48,125,46,"loadMessages"],[125,60,125,58],[125,62,125,60,"joinConversation"],[125,78,125,76],[125,80,125,78,"leaveConversation"],[125,97,125,95],[125,98,125,96],[125,99,125,97],[126,4,127,2],[126,8,127,2,"useEffect"],[126,14,127,11],[126,15,127,11,"useEffect"],[126,24,127,11],[126,26,127,12],[126,32,127,18],[127,6,128,4],[127,10,128,8,"socket"],[127,16,128,14],[127,18,128,16],[128,8,129,6,"socket"],[128,14,129,12],[128,15,129,13,"on"],[128,17,129,15],[128,18,129,16],[128,31,129,29],[128,33,129,31,"handleNewMessage"],[128,49,129,47],[128,50,129,48],[129,8,130,6],[129,15,130,13],[129,21,130,19],[130,10,131,8,"socket"],[130,16,131,14],[130,17,131,15,"off"],[130,20,131,18],[130,21,131,19],[130,34,131,32],[130,36,131,34,"handleNewMessage"],[130,52,131,50],[130,53,131,51],[131,8,132,6],[131,9,132,7],[132,6,133,4],[133,4,134,2],[133,5,134,3],[133,7,134,5],[133,8,134,6,"socket"],[133,14,134,12],[133,16,134,14,"handleNewMessage"],[133,32,134,30],[133,33,134,31],[133,34,134,32],[134,4,136,2],[134,8,136,6,"loading"],[134,15,136,13],[134,17,136,15],[135,6,137,4],[135,26,138,6],[135,30,138,6,"_reactJsxDevRuntime"],[135,49,138,6],[135,50,138,6,"jsxDEV"],[135,56,138,6],[135,58,138,7,"_reactNative"],[135,70,138,11],[135,71,138,11,"View"],[135,75,138,11],[136,8,138,12,"style"],[136,13,138,17],[136,15,138,19,"styles"],[136,21,138,25],[136,22,138,26,"loadingContainer"],[136,38,138,43],[137,8,138,43,"children"],[137,16,138,43],[137,31,139,8],[137,35,139,8,"_reactJsxDevRuntime"],[137,54,139,8],[137,55,139,8,"jsxDEV"],[137,61,139,8],[137,63,139,9,"_reactNative"],[137,75,139,26],[137,76,139,26,"ActivityIndicator"],[137,93,139,26],[138,10,139,27,"size"],[138,14,139,31],[138,16,139,32],[138,23,139,39],[139,10,139,40,"color"],[139,15,139,45],[139,17,139,46],[140,8,139,55],[141,10,139,55,"fileName"],[141,18,139,55],[141,20,139,55,"_jsxFileName"],[141,32,139,55],[142,10,139,55,"lineNumber"],[142,20,139,55],[143,10,139,55,"columnNumber"],[143,22,139,55],[144,8,139,55],[144,15,139,57],[145,6,139,58],[146,8,139,58,"fileName"],[146,16,139,58],[146,18,139,58,"_jsxFileName"],[146,30,139,58],[147,8,139,58,"lineNumber"],[147,18,139,58],[148,8,139,58,"columnNumber"],[148,20,139,58],[149,6,139,58],[149,13,140,12],[149,14,140,13],[150,4,142,2],[151,4,144,2],[151,8,144,6],[151,9,144,7,"conversation"],[151,21,144,19],[151,25,144,23],[151,26,144,24,"user"],[151,30,144,28],[151,32,144,30],[152,6,145,4],[152,13,145,11],[152,17,145,15],[153,4,146,2],[154,4,148,2],[154,24,149,4],[154,28,149,4,"_reactJsxDevRuntime"],[154,47,149,4],[154,48,149,4,"jsxDEV"],[154,54,149,4],[154,56,149,5,"_reactNative"],[154,68,149,9],[154,69,149,9,"View"],[154,73,149,9],[155,6,149,10,"style"],[155,11,149,15],[155,13,149,17,"styles"],[155,19,149,23],[155,20,149,24,"container"],[155,29,149,34],[156,6,149,34,"children"],[156,14,149,34],[156,30,150,6],[156,34,150,6,"_reactJsxDevRuntime"],[156,53,150,6],[156,54,150,6,"jsxDEV"],[156,60,150,6],[156,62,150,7,"_uiHeaderChatHeader"],[156,81,150,17],[156,82,150,17,"ChatHeader"],[156,92,150,17],[157,8,151,8,"conversation"],[157,20,151,20],[157,22,151,22,"conversation"],[157,34,151,35],[158,8,152,8,"currentUserId"],[158,21,152,21],[158,23,152,23,"user"],[158,27,152,27],[158,28,152,28,"id"],[158,30,152,31],[159,8,153,8,"onBack"],[159,14,153,14],[159,16,153,16,"onBack"],[159,17,153,16],[159,22,153,22,"router"],[159,33,153,28],[159,34,153,28,"router"],[159,40,153,28],[159,41,153,29,"back"],[159,45,153,33],[159,46,153,34],[159,47,153,36],[160,8,154,8,"onProfile"],[160,17,154,17],[160,19,154,19,"onProfile"],[160,20,154,19],[160,25,154,25],[160,26,154,26],[161,6,154,53],[162,8,154,53,"fileName"],[162,16,154,53],[162,18,154,53,"_jsxFileName"],[162,30,154,53],[163,8,154,53,"lineNumber"],[163,18,154,53],[164,8,154,53,"columnNumber"],[164,20,154,53],[165,6,154,53],[165,13,155,7],[165,14,155,8],[165,29,157,6],[165,33,157,6,"_reactJsxDevRuntime"],[165,52,157,6],[165,53,157,6,"jsxDEV"],[165,59,157,6],[165,61,157,7,"_uiMessagesMessagesList"],[165,84,157,19],[165,85,157,19,"MessagesList"],[165,97,157,19],[166,8,158,8,"messages"],[166,16,158,16],[166,18,158,18,"messages"],[166,26,158,27],[167,8,159,8,"currentUserId"],[167,21,159,21],[167,23,159,23,"user"],[167,27,159,27],[167,28,159,28,"id"],[167,30,159,31],[168,8,160,8,"onEndReached"],[168,20,160,20],[168,22,160,22,"loadMessages"],[169,6,160,35],[170,8,160,35,"fileName"],[170,16,160,35],[170,18,160,35,"_jsxFileName"],[170,30,160,35],[171,8,160,35,"lineNumber"],[171,18,160,35],[172,8,160,35,"columnNumber"],[172,20,160,35],[173,6,160,35],[173,13,161,7],[173,14,161,8],[173,29,163,6],[173,33,163,6,"_reactJsxDevRuntime"],[173,52,163,6],[173,53,163,6,"jsxDEV"],[173,59,163,6],[173,61,163,7,"_uiInputChatInput"],[173,78,163,16],[173,79,163,16,"ChatInput"],[173,88,163,16],[174,8,164,8,"onSendMessage"],[174,21,164,21],[174,23,164,23,"handleSendMessage"],[174,40,164,41],[175,8,165,8,"disabled"],[175,16,165,16],[175,18,165,18,"sendingMessage"],[176,6,165,33],[177,8,165,33,"fileName"],[177,16,165,33],[177,18,165,33,"_jsxFileName"],[177,30,165,33],[178,8,165,33,"lineNumber"],[178,18,165,33],[179,8,165,33,"columnNumber"],[179,20,165,33],[180,6,165,33],[180,13,166,7],[180,14,166,8],[181,4,166,8],[182,6,166,8,"fileName"],[182,14,166,8],[182,16,166,8,"_jsxFileName"],[182,28,166,8],[183,6,166,8,"lineNumber"],[183,16,166,8],[184,6,166,8,"columnNumber"],[184,18,166,8],[185,4,166,8],[185,11,167,10],[185,12,167,11],[186,2,169,0],[186,3,169,1],[187,2,169,2,"_s"],[187,4,169,2],[187,5,47,13,"ChatScreen"],[187,15,47,33],[188,4,47,33],[188,12,48,29,"useLocalSearchParams"],[188,23,48,49],[188,24,48,49,"useLocalSearchParams"],[188,44,48,49],[188,46,49,19,"useAuthContext"],[188,66,49,33],[188,67,49,33,"useAuthContext"],[188,81,49,33],[188,83,50,58,"useSocket"],[188,105,50,67],[188,106,50,67,"useSocket"],[188,115,50,67],[189,2,50,67],[190,2,50,67,"_c"],[190,4,50,67],[190,7,47,13,"ChatScreen"],[190,17,47,33],[191,2,171,0],[191,6,171,6,"styles"],[191,12,171,12],[191,15,171,15,"StyleSheet"],[191,27,171,25],[191,28,171,25,"StyleSheet"],[191,38,171,25],[191,39,171,26,"create"],[191,45,171,32],[191,46,171,33],[192,4,172,2,"container"],[192,13,172,11],[192,15,172,13],[193,6,173,4,"flex"],[193,10,173,8],[193,12,173,10],[193,13,173,11],[194,6,174,4,"backgroundColor"],[194,21,174,19],[194,23,174,21],[195,4,175,2],[195,5,175,3],[196,4,176,2,"loadingContainer"],[196,20,176,18],[196,22,176,20],[197,6,177,4,"flex"],[197,10,177,8],[197,12,177,10],[197,13,177,11],[198,6,178,4,"alignItems"],[198,16,178,14],[198,18,178,16],[198,26,178,24],[199,6,179,4,"justifyContent"],[199,20,179,18],[199,22,179,20],[199,30,179,28],[200,6,180,4,"backgroundColor"],[200,21,180,19],[200,23,180,21],[201,4,181,2],[202,2,182,0],[202,3,182,1],[202,4,182,2],[203,2,182,3],[203,6,182,3,"_c"],[203,8,182,3],[204,2,182,3,"$RefreshReg$"],[204,14,182,3],[204,15,182,3,"_c"],[204,17,182,3],[205,0,182,3],[205,3]],"functionMap":{"names":["<global>","ChatScreen","loadConversation","conversations.find$argument_0","loadMessages","handleSendMessage","setMessages$argument_0","handleNewMessage","prev.findIndex$argument_0","useEffect$argument_0","<anonymous>","ChatHeader.props.onBack","ChatHeader.props.onProfile"],"mappings":"AAA;oCC8C;uCCU;sCCK,4BD;GDQ;mCGE;GHY;4BIE;kBCM,6BD;GJO;uCME;kBDE;2CEC,6BF;OCK;GNE;YQE;WCO;KDI;GRC;YQE;aCG;ODE;GRE;gBUmB,mBV;mBWC,iCX;CDe"},"hasCjsExports":false},"type":"js/module"}]}